<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>A Special Message For You</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --purple: #a855f7;
      --purple-dark: #7c3aed;
      --gold: #fbbf24;
      --gold-dark: #f59e0b;
      --rose: #fb7185;
      --wine: #881337;
      --cream: #fef3e2;
    }

    body {
      min-height: 100vh;
      background: #0f0a1e;
      font-family: 'Cormorant Garamond', Georgia, serif;
      overflow: hidden;
    }

    .room {
      position: relative;
      width: 100%;
      height: 100vh;
      background: linear-gradient(180deg, #1e1533 0%, #2d1f47 50%, #1a1229 100%);
      overflow: hidden;
    }

    .floor {
      position: absolute;
      bottom: 0;
      width: 100%;
      height: 35%;
      background: linear-gradient(180deg, #3d2a54 0%, #2a1f3d 100%);
      box-shadow: inset 0 20px 50px rgba(0,0,0,0.3);
    }

    .wall-trim {
      position: absolute;
      bottom: 35%;
      width: 100%;
      height: 12px;
      background: linear-gradient(90deg, #d4a574, #e8c39e, #d4a574);
      box-shadow: 0 2px 10px rgba(212, 165, 116, 0.3);
    }

    .hint-bar {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(30, 20, 50, 0.9);
      border: 1px solid rgba(251, 191, 36, 0.3);
      padding: 0.75rem 1.5rem;
      border-radius: 30px;
      color: #fef3e2;
      font-size: 1.1rem;
      z-index: 50;
      transition: all 0.3s ease;
      box-shadow: 0 4px 20px rgba(0,0,0,0.4);
    }

    .hint-word {
      cursor: pointer;
      transition: all 0.2s ease;
      position: relative;
      padding: 0.1rem 0.2rem;
      border-radius: 4px;
    }

    .hint-word:hover {
      color: #fbbf24;
      background: rgba(251, 191, 36, 0.1);
    }

    .hint-word.correct {
      color: #fbbf24;
      text-shadow: 0 0 10px rgba(251, 191, 36, 0.5);
    }

    .key-hidden {
      position: fixed;
      top: 60px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 2.5rem;
      opacity: 0;
      transition: all 0.5s ease;
      cursor: pointer;
      z-index: 51;
      filter: drop-shadow(0 0 8px rgba(251, 191, 36, 0.8));
      animation: key-shimmer 1.5s ease-in-out infinite;
    }

    .key-hidden.visible {
      opacity: 1;
      top: 70px;
    }

    @keyframes key-shimmer {
      0%, 100% { filter: drop-shadow(0 0 8px rgba(251, 191, 36, 0.6)); }
      50% { filter: drop-shadow(0 0 15px rgba(251, 191, 36, 1)); }
    }

    .inventory {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 10px;
      background: rgba(30, 20, 50, 0.9);
      border: 1px solid rgba(251, 191, 36, 0.2);
      padding: 10px 20px;
      border-radius: 15px;
      z-index: 50;
      box-shadow: 0 4px 20px rgba(0,0,0,0.4);
    }

    .inventory-slot {
      width: 60px;
      height: 60px;
      background: rgba(255,255,255,0.05);
      border: 2px dashed rgba(251, 191, 36, 0.3);
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.8rem;
      transition: all 0.3s ease;
    }

    .inventory-slot.filled {
      border: 2px solid var(--gold);
      background: rgba(251, 191, 36, 0.15);
    }

    .inventory-slot.selected {
      transform: scale(1.1);
      box-shadow: 0 0 20px rgba(245, 158, 11, 0.5);
    }

    .object {
      position: absolute;
      cursor: pointer;
      transition: transform 0.2s ease, filter 0.2s ease;
    }

    .object:hover {
      filter: brightness(1.2);
    }

    .painting {
      top: 15%;
      left: 15%;
      width: 180px;
      height: 140px;
      background: linear-gradient(145deg, #4a1942, #2d1f47);
      border: 12px solid #d4a574;
      border-radius: 5px;
      box-shadow: 5px 5px 25px rgba(0,0,0,0.6), inset 0 0 30px rgba(168, 85, 247, 0.2);
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 0.1s ease;
    }

    .painting.wobble {
      animation: wobble 0.5s ease;
    }

    @keyframes wobble {
      0% { transform: rotate(0deg); }
      25% { transform: rotate(-5deg); }
      50% { transform: rotate(5deg); }
      75% { transform: rotate(-3deg); }
      100% { transform: rotate(0deg); }
    }

    .painting-art {
      font-size: 4rem;
    }

    .painting-img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 2px;
    }

    .window {
      top: 10%;
      right: 15%;
      width: 150px;
      height: 180px;
      background: linear-gradient(180deg, #0c1445 0%, #1e3a5f 50%, #0c1445 100%);
      border: 15px solid #d4a574;
      border-radius: 5px;
      overflow: hidden;
      box-shadow: inset 0 0 30px rgba(100, 200, 255, 0.1);
    }

    .window::before {
      content: 'üåô';
      position: absolute;
      top: 20px;
      right: 20px;
      font-size: 2rem;
      filter: drop-shadow(0 0 10px rgba(255, 250, 200, 0.8));
    }

    .window::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 2px;
      height: 100%;
      background: #d4a574;
    }

    .stars {
      position: absolute;
      font-size: 0.8rem;
      color: #fef3c7;
      text-shadow: 0 0 5px rgba(255, 255, 200, 0.8);
    }

    .table {
      bottom: 15%;
      left: 50%;
      transform: translateX(-50%);
      width: 300px;
      height: 120px;
    }

    .table-top {
      position: absolute;
      top: 0;
      width: 100%;
      height: 20px;
      background: linear-gradient(145deg, #8b5a2b, #6b4423);
      border-radius: 5px;
      box-shadow: 0 3px 10px rgba(0,0,0,0.4);
    }

    .table-legs {
      position: absolute;
      bottom: 0;
      width: 20px;
      height: 100px;
      background: linear-gradient(90deg, #6b4423, #5a3a1d);
    }

    .table-legs.left { left: 20px; }
    .table-legs.right { right: 20px; }

    .chest {
      bottom: calc(15% + 100px);
      left: 50%;
      transform: translateX(-50%);
      width: 120px;
      height: 80px;
      cursor: pointer;
    }

    .chest-body {
      position: absolute;
      bottom: 0;
      width: 120px;
      height: 60px;
      background: linear-gradient(145deg, #8b5a2b, #5c3d1e);
      border-radius: 8px;
      box-shadow: inset 0 -8px 15px rgba(0,0,0,0.4), 0 5px 20px rgba(0,0,0,0.5);
      border: 2px solid #d4a574;
    }

    .chest-lid {
      position: absolute;
      top: 0;
      width: 120px;
      height: 35px;
      background: linear-gradient(145deg, #a06830, #7a4f25);
      border-radius: 8px 8px 0 0;
      transform-origin: bottom;
      transition: transform 0.8s ease;
      border: 2px solid #d4a574;
      border-bottom: none;
    }

    .chest.open .chest-lid {
      transform: rotateX(-110deg);
    }

    .chest-lock {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 1.5rem;
      transition: all 0.3s ease;
    }

    .chest.unlocked .chest-lock {
      opacity: 0;
    }

    .chest-glow {
      position: absolute;
      top: -30px;
      left: 50%;
      transform: translateX(-50%);
      width: 120px;
      height: 100px;
      background: radial-gradient(ellipse, rgba(251, 191, 36, 0.9) 0%, rgba(251, 191, 36, 0.4) 40%, transparent 70%);
      opacity: 0;
      pointer-events: none;
    }

    .chest.open .chest-glow {
      opacity: 1;
      animation: glow-pulse 1.5s ease-in-out infinite;
    }

    @keyframes glow-pulse {
      0%, 100% { opacity: 0.7; transform: translateX(-50%) scale(1); }
      50% { opacity: 1; transform: translateX(-50%) scale(1.1); }
    }

    .plant {
      bottom: 35%;
      left: 8%;
      font-size: 4rem;
    }

    .rug {
      bottom: 8%;
      left: 50%;
      transform: translateX(-50%);
      width: 250px;
      height: 80px;
      background: linear-gradient(90deg, #881337, #be185d, #881337);
      border-radius: 50%;
      opacity: 0.8;
      box-shadow: 0 5px 20px rgba(136, 19, 55, 0.4);
    }

    .rug-pattern {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 180px;
      height: 50px;
      border: 3px solid rgba(251, 191, 36, 0.4);
      border-radius: 50%;
    }

    .bookshelf {
      top: 20%;
      right: 40%;
      width: 100px;
      height: 150px;
      background: linear-gradient(180deg, #6b4423, #5a3a1d);
      border-radius: 5px;
      box-shadow: 3px 3px 15px rgba(0,0,0,0.5);
    }

    .shelf {
      position: absolute;
      width: 100%;
      height: 8px;
      background: #8b5a2b;
    }

    .shelf:nth-child(1) { top: 30%; }
    .shelf:nth-child(2) { top: 60%; }

    .books {
      position: absolute;
      display: flex;
      gap: 3px;
      bottom: 42%;
      left: 10px;
    }

    .book {
      width: 15px;
      height: 35px;
      border-radius: 2px;
    }

    .candle {
      bottom: calc(15% + 115px);
      left: calc(50% + 80px);
      font-size: 2rem;
      animation: flicker 0.5s ease-in-out infinite alternate;
    }

    @keyframes flicker {
      from { filter: brightness(1); }
      to { filter: brightness(1.3); }
    }

    .message-popup {
      position: fixed;
      bottom: 100px;
      left: 50%;
      transform: translateX(-50%) translateY(20px);
      background: rgba(30, 20, 50, 0.95);
      border: 1px solid rgba(251, 191, 36, 0.3);
      color: #fef3e2;
      padding: 1rem 1.5rem;
      border-radius: 10px;
      font-size: 1.1rem;
      opacity: 0;
      transition: all 0.3s ease;
      pointer-events: none;
      z-index: 60;
      box-shadow: 0 4px 20px rgba(0,0,0,0.4);
    }

    .message-popup.show {
      opacity: 1;
      transform: translateX(-50%) translateY(0);
    }

    .question-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(ellipse at center, rgba(45, 31, 71, 0.97) 0%, rgba(15, 10, 30, 0.99) 100%);
      display: flex;
      justify-content: center;
      align-items: center;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.5s ease;
      z-index: 100;
    }

    .question-overlay.show {
      opacity: 1;
      pointer-events: auto;
    }

    .question-content {
      text-align: center;
      padding: 2rem;
      transform: scale(0.8);
      transition: transform 0.5s ease;
    }

    .question-overlay.show .question-content {
      transform: scale(1);
    }

    .reveal-emoji {
      font-size: 5rem;
      margin-bottom: 1rem;
      animation: bounce 1s ease infinite;
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-15px); }
    }

    .reveal-message {
      font-size: 1.4rem;
      color: #fbbf24;
      margin-bottom: 1rem;
      font-style: italic;
    }

    .reveal-question {
      font-size: 2.8rem;
      font-weight: 600;
      color: #fef3e2;
      margin-bottom: 2rem;
    }

    .btn {
      padding: 1rem 3rem;
      font-family: 'Cormorant Garamond', Georgia, serif;
      font-size: 1.3rem;
      font-weight: 600;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .btn-yes {
      background: linear-gradient(145deg, #a855f7, #7c3aed);
      color: white;
      box-shadow: 0 4px 20px rgba(168, 85, 247, 0.4);
    }

    .btn-yes:hover {
      background: linear-gradient(145deg, #c084fc, #a855f7);
      transform: scale(1.05);
      box-shadow: 0 6px 25px rgba(168, 85, 247, 0.5);
    }

    .btn-no {
      position: fixed;
      background: rgba(255,255,255,0.1);
      border: 1px solid rgba(255,255,255,0.2);
      color: rgba(255,255,255,0.6);
      transition: left 0.1s ease-out, top 0.1s ease-out;
      z-index: 101;
    }

    .response {
      margin-top: 1.5rem;
      font-size: 1.3rem;
      color: #fb7185;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .response.show {
      opacity: 1;
    }

    .hidden {
      display: none !important;
    }

    .click-hint {
      position: absolute;
      width: 30px;
      height: 30px;
      border: 2px solid rgba(255,255,255,0.5);
      border-radius: 50%;
      animation: hint-pulse 2s ease-in-out infinite;
      pointer-events: none;
    }

    @keyframes hint-pulse {
      0%, 100% { transform: scale(1); opacity: 0.5; }
      50% { transform: scale(1.5); opacity: 0; }
    }
  </style>
</head>
<body>
  <div class="room">
    <div class="floor"></div>
    <div class="wall-trim"></div>

    <div class="hint-bar" id="hintBar"><span class="hint-word" onclick="click_key_word(this)">Click</span> around the room to explore...</div>

    <div class="object painting" id="painting" onclick="click_painting()">
      <img class="painting-img" src="photo.jpg" alt="painting">
    </div>

    <div class="key-hidden" id="keyHidden" onclick="pick_key()">üîë</div>

    <div class="object window">
      <span class="stars" style="top: 40px; left: 20px;">‚ú¶</span>
      <span class="stars" style="top: 70px; left: 50px;">‚úß</span>
      <span class="stars" style="top: 30px; left: 80px;">‚ú¶</span>
    </div>

    <div class="object bookshelf" onclick="click_bookshelf()">
      <div class="shelf"></div>
      <div class="shelf"></div>
      <div class="books">
        <div class="book" style="background: #dc2626;"></div>
        <div class="book" style="background: #2563eb;"></div>
        <div class="book" style="background: #16a34a;"></div>
        <div class="book" style="background: #eab308;"></div>
      </div>
    </div>

    <div class="object plant" onclick="click_plant()">ü™¥</div>

    <div class="object rug" onclick="click_rug()">
      <div class="rug-pattern"></div>
    </div>

    <div class="object table">
      <div class="table-top"></div>
      <div class="table-legs left"></div>
      <div class="table-legs right"></div>
    </div>

    <div class="object chest" id="chest" onclick="click_chest()">
      <div class="chest-glow"></div>
      <div class="chest-lid"></div>
      <div class="chest-body"></div>
      <div class="chest-lock">üîí</div>
    </div>

    <div class="object candle">üïØÔ∏è</div>
  </div>

  <div class="inventory">
    <div class="inventory-slot" id="slot1" onclick="select_slot(1)"></div>
  </div>

  <div class="message-popup" id="messagePopup"></div>

  <div class="question-overlay" id="questionOverlay">
    <div class="question-content">
      <div class="reveal-emoji">üíú</div>
      <p class="reveal-message">You found what was hidden in my heart...</p>
      <h1 class="reveal-question">Will you be my Valentine?</h1>
      <button class="btn btn-yes" id="yesBtn">Yes!</button>
      <p class="response" id="response"></p>
    </div>
  </div>

  <button class="btn btn-no hidden" id="noBtn">No</button>

  <script>
    let has_key = false;
    let key_selected = false;
    let chest_unlocked = false;
    let key_revealed = false;

    function show_message(text, duration = 2000) {
      let popup = document.getElementById('messagePopup');
      popup.textContent = text;
      popup.classList.add('show');
      setTimeout(() => popup.classList.remove('show'), duration);
    }

    function update_hint(text) {
      document.getElementById('hintBar').innerHTML = text;
    }

    function click_painting() {
      let painting = document.getElementById('painting');
      painting.classList.remove('wobble');
      void painting.offsetWidth;
      painting.classList.add('wobble');
      show_message('A lovely painting... nothing behind it. üíú');
    }

    function pick_key() {
      if (has_key || !key_revealed) return;

      has_key = true;
      document.getElementById('keyHidden').classList.remove('visible');
      document.getElementById('slot1').textContent = 'üîë';
      document.getElementById('slot1').classList.add('filled');
      key_selected = true;
      document.getElementById('slot1').classList.add('selected');

      show_message('You picked up the key! üîë');
      update_hint('Now find something to unlock...');
    }

    function select_slot(num) {
      if (!has_key) return;

      key_selected = !key_selected;
      let slot = document.getElementById(`slot${num}`);

      if (key_selected) {
        slot.classList.add('selected');
        update_hint('Key selected. Click on something to use it.');
      } else {
        slot.classList.remove('selected');
        update_hint('Click the key to select it again.');
      }
    }

    function click_chest() {
      let chest = document.getElementById('chest');

      if (chest_unlocked) {
        open_chest();
        return;
      }

      if (!has_key) {
        if (!key_revealed) {
          update_hint('The chest is locked. Maybe there\'s a <span class="hint-word" onclick="click_key_word(this)">key</span> somewhere?');
          show_message('It\'s locked... üîí');
        } else {
          show_message('The chest is locked. Grab the key!');
        }
        return;
      }

      if (!key_selected) {
        show_message('The chest is locked. Select the key first!');
        return;
      }

      chest_unlocked = true;
      chest.classList.add('unlocked');
      document.getElementById('slot1').textContent = '';
      document.getElementById('slot1').classList.remove('filled', 'selected');

      show_message('Click the chest to open it! ‚ú®', 2500);
      update_hint('The lock clicks open! Click the chest to see what\'s inside...');
    }

    function click_key_word(el) {
      if (key_revealed || has_key) return;

      key_revealed = true;
      el.classList.add('correct');
      document.getElementById('keyHidden').classList.add('visible');
      show_message('You found a hidden key! üîë');
      setTimeout(() => update_hint('Grab the key!'), 500);
    }

    function open_chest() {
      if (!chest_unlocked) return;

      let chest = document.getElementById('chest');
      chest.classList.add('open');

      setTimeout(() => {
        document.getElementById('questionOverlay').classList.add('show');
        document.getElementById('noBtn').classList.remove('hidden');

        btn_x = window.innerWidth / 2 + 120;
        btn_y = window.innerHeight / 2 + 80;
        no_btn.style.left = `${btn_x}px`;
        no_btn.style.top = `${btn_y}px`;
      }, 1000);
    }

    function click_plant() {
      show_message('A lovely plant. Nothing hidden here. ü™¥');
    }

    function click_rug() {
      show_message('A soft purple rug. Cozy! üíú');
    }

    function click_bookshelf() {
      show_message('Old books... nothing useful. üìö');
    }

    let no_btn = document.getElementById('noBtn');
    let yes_btn = document.getElementById('yesBtn');
    let response_el = document.getElementById('response');
    let btn_x = 0;
    let btn_y = 0;

    document.addEventListener('mousemove', (e) => {
      if (no_btn.classList.contains('hidden')) return;

      let rect = no_btn.getBoundingClientRect();
      let btn_center_x = rect.left + rect.width / 2;
      let btn_center_y = rect.top + rect.height / 2;

      let dist_x = e.clientX - btn_center_x;
      let dist_y = e.clientY - btn_center_y;
      let distance = Math.sqrt(dist_x * dist_x + dist_y * dist_y);

      let threshold = 150;

      if (distance < threshold) {
        let angle = Math.atan2(dist_y, dist_x);
        let push = (threshold - distance) / threshold;

        btn_x -= Math.cos(angle) * push * 30;
        btn_y -= Math.sin(angle) * push * 30;

        let padding = 20;
        let btn_width = rect.width;
        let btn_height = rect.height;
        let max_x = window.innerWidth - btn_width - padding;
        let max_y = window.innerHeight - btn_height - padding;

        if (btn_x < padding) btn_x = padding;
        if (btn_x > max_x) btn_x = max_x;
        if (btn_y < padding) btn_y = padding;
        if (btn_y > max_y) btn_y = max_y;

        no_btn.style.left = `${btn_x}px`;
        no_btn.style.top = `${btn_y}px`;
      }
    });

    yes_btn.addEventListener('click', () => {
      window.location.href = 'yes.html';
    });

    no_btn.addEventListener('click', () => {
      response_el.textContent = 'Are you sure? ü•∫';
      response_el.classList.add('show');
    });
  </script>
</body>
</html>
